{% extends 'base.html' %}
{% load humanize %}

{% block title %}Inquiry - {{ car.name }}{% endblock %}

{% block content %}
<style>
    .inquiry-page { max-width: 450px; margin: 30px auto; padding: 20px; }
    .back-link { font-size: 0.85rem; color: var(--text-muted); text-decoration: none; margin-bottom: 15px; display: inline-block; }
    .back-link:hover { color: var(--accent-primary); }
    .car-preview { display: flex; gap: 12px; align-items: center; padding: 12px; background: var(--bg-secondary); border-radius: 8px; margin-bottom: 20px; border: 1px solid var(--border-color); }
    .car-preview img { width: 80px; height: 55px; object-fit: cover; border-radius: 6px; }
    .car-preview h3 { font-size: 0.95rem; font-weight: 600; margin: 0 0 4px 0; }
    .car-preview p { font-size: 0.8rem; color: var(--text-muted); margin: 0; }
    .form-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 15px; }
    .form-group { margin-bottom: 12px; }
    .form-group label { display: block; font-size: 0.8rem; margin-bottom: 4px; color: var(--text-secondary); }
    .form-group input, .form-group textarea { width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; background: var(--bg-primary); color: var(--text-primary); font-size: 0.9rem; }
    .form-group input:focus, .form-group textarea:focus { outline: none; border-color: var(--accent-primary); }
    .form-group textarea { resize: none; }
    .submit-btn { width: 100%; padding: 10px; background: var(--accent-primary); color: white; border: none; border-radius: 6px; font-size: 0.9rem; cursor: pointer; margin-top: 5px; }
    .submit-btn:hover { opacity: 0.9; }
</style>

<div class="inquiry-page">
    <a href="{% url 'car_detail' car.id %}" class="back-link">← Back to Car</a>
    
    <div class="car-preview">
        {% if image_url %}
            <img src="{{ image_url }}" alt="{{ car.name }}">
        {% else %}
            <div style="width: 80px; height: 55px; background: var(--bg-tertiary); border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-car" style="color: var(--text-muted);"></i>
            </div>
        {% endif %}
        <div>
            <h3>{{ car.brand }} {{ car.name }}</h3>
            <p>{{ car.model_year }} • {{ car.price_display }}{% if selected_color %} • {{ selected_color.name }}{% endif %}</p>
        </div>
    </div>

    <div class="form-title">Make an Inquiry</div>
    
    <form method="post">
        {% csrf_token %}
        <div class="form-group">
            <label>Name</label>
            <input type="text" name="name" value="{{ customer.name|default:'' }}" required>
        </div>
        <div class="form-group">
            <label>Email</label>
            <input type="email" name="email" value="{{ user.email|default:'' }}" required>
        </div>
        <div class="form-group">
            <label>Phone</label>
            <input type="tel" name="phone" placeholder="+91" value="{{ customer.phone|default:'' }}" required>
        </div>
        <div class="form-group">
            <label>Message</label>
            <textarea name="message" rows="3" placeholder="Ask about test drive, availability, features..." required></textarea>
        </div>
        <button type="submit" class="submit-btn">Submit Inquiry</button>
    </form>
</div>
{% endblock %}
